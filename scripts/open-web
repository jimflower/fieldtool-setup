#!/usr/bin/env bash
[ -f /opt/fieldtool/config.env ] && . /opt/fieldtool/config.env || true
# Usage: open-web http://192.168.1.50
set -euo pipefail
URL="${1:-}"
[ -z "$URL" ] && { echo "Usage: open-web <url>"; exit 2; }
if command -v chromium-browser >/dev/null 2>&1 && [ -n "${DISPLAY:-}" ]; then
  echo "[INFO] Launching Chromium (kiosk) -> $URL"
  chromium-browser --kiosk --app="$URL" >/dev/null 2>&1 &
else
  echo "[INFO] No GUI; opening in w3m (text browser). Press Q to quit."
  w3m "$URL"
fi
